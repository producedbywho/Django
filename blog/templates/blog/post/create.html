{% extends "blog/base.html" %}
{% block content %}
<div class="max-w-3xl mx-auto p-8 bg-white rounded-lg shadow-lg mt-12">
  <h1 class="text-4xl font-bold mb-6 text-gray-900">Create a New Post</h1>
  <form method="post" class="space-y-6" id="post-form">
    {% csrf_token %}
    {{ form.non_field_errors }}

    <div>
      <label for="{{ form.title.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-1">Title</label>
      {{ form.title }}
      {{ form.title.errors }}
    </div>

    <div>
      <label for="{{ form.body.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-1">Body</label>
      {{ form.body }}
      {{ form.body.errors }}
    </div>

    <div>
      <label class="block text-sm font-semibold text-gray-700 mb-2">Tags</label>
      <div class="flex gap-4">
        <div class="tag-button cursor-pointer rounded-md border border-gray-300 px-3 py-1 text-sm select-none" data-tag="Hot! ğŸ”¥">
          Hot! ğŸ”¥
        </div>
        <div class="tag-button cursor-pointer rounded-md border border-gray-300 px-3 py-1 text-sm select-none" data-tag="Science ğŸ§ª">
          Science ğŸ§ª
        </div>
        <div class="tag-button cursor-pointer rounded-md border border-gray-300 px-3 py-1 text-sm select-none" data-tag="Memes ğŸ¸">
          Memes ğŸ¸
        </div>
        <div class="tag-button cursor-pointer rounded-md border border-gray-300 px-3 py-1 text-sm select-none" data-tag="Interesting ğŸ”">
          Interesting ğŸ”
        </div>
      </div>
      <input type="hidden" name="tags" id="tags-input" value="">
    </div>

    <button type="submit"
      class="relative inline-block px-6 py-2 rounded-xl border border-gray-400 bg-gray-200 text-gray-900 font-semibold
             shadow-lg hover:shadow-xl active:shadow-inner transition duration-300 ease-in-out
             bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 bg-[length:200%_200%] hover:bg-left animate-gradient-x mt-4">
      Publish
    </button>
  </form>
</div>

<style>
  @keyframes gradient-x {
    0% {
      background-position: 200% 0;
    }
    100% {
      background-position: 0 0;
    }
  }
  .animate-gradient-x {
    animation: gradient-x 3s linear infinite;
    background-position: 200% 0;
  }

  .tag-button.selected {
    background-color: #a7f3d0;
    border-color: #34d399;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const tagsInput = document.getElementById('tags-input');
    const tagButtons = document.querySelectorAll('.tag-button');

    tagButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        // Toggle ÎµÏ€Î¹Î»Î¿Î³Î®
        const isSelected = btn.classList.contains('selected');

        // Î‘Î½ Î¸Î­Î»ÎµÎ¹Ï‚ Î½Î± ÎµÏ€Î¹Ï„ÏÎ­Ï€ÎµÎ¹Ï‚ Î¼ÏŒÎ½Î¿ 1 tag ÎµÏ€Î¹Î»ÎµÎ³Î¼Î­Î½Î¿ Ï„Î±Ï…Ï„ÏŒÏ‡ÏÎ¿Î½Î±, Î¾ÎµÏƒÎ®ÎºÏ‰ÏƒÎµ Ï„Î·Î½ ÎµÏ€Î¹Î»Î¿Î³Î® Î±Ï€ÏŒ ÏŒÎ»Î±
        tagButtons.forEach(b => b.classList.remove('selected'));

        if (!isSelected) {
          btn.classList.add('selected');
          tagsInput.value = btn.getAttribute('data-tag');
        } else {
          tagsInput.value = '';
        }
      });
    });
  });
</script>
{% endblock %}
